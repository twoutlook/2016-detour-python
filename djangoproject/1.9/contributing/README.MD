
#  take note of <b>Writing your first patch for Django¶</b>
Reference, https://docs.djangoproject.com/en/1.9/intro/contributing/

## 心得
- 要能夠在本機上的 Python 虛擬環境完成現有的測試
  - 基本上是沒有錯誤的 
- 要能夠回到某個特定點，測試並獲得已知的測試失敗
  - git 的觀念要夠紮實 
- 一開始在 Win 10 做沒有成功，漏了 pip install -e /path/to/your/local/clone/django/
- 在 Ubuntu 16.04 有完成。


## Working on Ubuntu 16.04
```
(djangodev) ubuntu002@ubuntu002:~/django$ cd tests
(djangodev) ubuntu002@ubuntu002:~/django/tests$ ./runtests.py 
Testing against Django installed in '/home/ubuntu002/django/django' with up to 4 processes
Creating test database for alias 'default'...
Cloning test database for alias 'default'...
Cloning test database for alias 'default'...
Cloning test database for alias 'default'...
Cloning test database for alias 'default'...
Creating test database for alias 'other'...
Cloning test database for alias 'other'...
Cloning test database for alias 'other'...
Cloning test database for alias 'other'...
Cloning test database for alias 'other'...
................s.......................................................s..........ss...................................................................................................................................................sssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss.sssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss......................................s.............................................................................s..........................................ssssssssssssssssssssssss..............ss.......ss..........................................................................................................................s..............................................................................................................................................sss.ssss.................................................................................................................................................s............................sssssssssssssssssssssssssssssssssssssssssssssss..........................sss......................................s............................................................x........................ssssssssssssssssssssssssss.ssssssssssssssss...........................................................................s..........................................s...............s.......................................................................s..............................s.......................s.........................s...................s.....................................................................................s.......................................s...........................................................ss.s.......................................................................................................................................................................................ss...sssss......s....................................................................s.s.s........s..s.s.....s...ssss..s...................................................................................................................................................................................................................................................................................s......................................................................................................................sss..............................................................sssssssssssssssssssssssssssssssssssssssssssssssss.s........................................................ss...............................x..s.............x....................................................................................................................s..........................s.............................................................................s...............................................................................................................................................s..........................................................................s.......................................s........................................................................s...............................................................................................................................................................................................................................................................................................ss....................................sssssssssss..............................................................................................................................................................................................................................................................................................................................s............s.ssssssssss.............................................................................................................s.s....................ss........................................................................................................................................................................................................................................................................................................s...............................................................ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss........................................................s......ssssssssssssssssssss.....................s..................................................................s...s..............................s...............................ss......sssssss..sssss...sssssss.........................................................s...s...sssssssssssssss........................................................................................................................................................................................................................................................ss...................ss...........................................................................................................................................s...s..........................................................................s...............................................s...........................................................................................................................................................................................................................................................................................................................................................................ss...ss.........................................................................................................................................................................................................................................................................................................................................................................................................................s.............s.......................................................................................ss................................................................................................................................................................................................................................................................................................................................................s...........................................................................................................................................................ssssssssss.........................................................................................................................................................................s....s.s.........s..sssssssssssssssssssss..............................s.s......s.........................................................................................................................................................................................................................sss...........................s..s...............s...ssss.s......................................................ssssss....................ssssss....................ssssss....................ssssss.......................................................................................................................................................................................................................s..s...............................................................................................................................................................................................................................................................ss...........................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................ss....................................................................................................................................................................................................................s....................................................................................s.......s............sssssssssss......................................................................................................ss...........................................................................................................................s........................ss...ss...s.s....s................................ss.........ss........................................................................................s...............................................s...s................
..........ss...................ss......................................................................................................................................................................ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss.........s..........ssssss....s........s.s..s...ss.sss.....ssss....s.s.......ss.....ssss...........sss....................................................................................................................................................................................s........................................................ss..................ssss.............................................................................................................................................................................................................................................................................................s.ssss................................................................................................ssssss..........................................x.............................ss.............................................sssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss.............ssssssssssssss...................sssssssssss..................
----------------------------------------------------------------------
Ran 11293 tests in 109.616s

OK (skipped=1232, expected failures=4)
Destroying test database for alias 'default'...
Destroying test database for alias 'default'...
Destroying test database for alias 'default'...
Destroying test database for alias 'default'...
Destroying test database for alias 'default'...
Destroying test database for alias 'other'...
Destroying test database for alias 'other'...
Destroying test database for alias 'other'...
Destroying test database for alias 'other'...
Destroying test database for alias 'other'...
(djangodev) ubuntu002@ubuntu002:~/django/tests$ ^C



```

## Rollback to certain point

```

(djangodev) ubuntu002@ubuntu002:~/django/tests$ git checkout 4ccfc4439a7add24f8db4ef3960d02ef8ae09887
Note: checking out '4ccfc4439a7add24f8db4ef3960d02ef8ae09887'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b <new-branch-name>

HEAD is now at 4ccfc44... Refs #24652 -- Fixed a test failure in file_uploads tests on Windows.
(djangodev) ubuntu002@ubuntu002:~/django/tests$ ./runtests.py 
Testing against Django installed in '/home/ubuntu002/django/django'
Creating test database for alias 'default'...
Creating test database for alias 'other'...
.........................................................s..........................................s..........ss.......................................................................................................................................ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss............................................................................................................s..............................................................................................................................................s.......................................................................................................F...................................sss.sss........................................................sss.....................................s......................sssssssssssssssssssssssssssssssssssssssssssss...........................................................................................................x......................................ssssssssssss.ssssssssss.....................ssssssssssssssssssss..................................s.................................................................s.......................s....................................................s................s.........................s.................s...................................................................................................s...............................s.......s.....................s.........................................................................................................................................................................................xx....................................................sssss......s.......ss.....s..s.s.....s...ssss..s..s.s.........s.s......s.s............................................................................................................................................................................s.............................................................................sss...s...........................................................................................................................................................ssssssssssssssssssssssssssssssssssssssssssssssss....................................F.......ss...............................x....s.............x................................................................................................................................s.................................................................................................................................................................................................................................s........................................s............................................................s......................................................s....................................................................................................................................................................ss..........................................................................sssssssss.................................................................................................................................................................................................................................................................................s.ssssssssss...........................................................................................................s.s....ss......................................................................................................................................................................................s..........................................................................................sssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss.................................sssssssssssss..............................................................s...........................................sss......ssssss..ssssss...ssssss..............................s...s...ssssssssssssss...........................................................................................................................................................................................ssss.................ss................................................................................................................................s.......s..................................................................s......................................................................................................................................................................................................................................................................s.................................................................................................................................................................................................................................................................................................................................................................................................................................................................s.............................................................................................s..............................................................................................................................................................................................................................................................................................................s..........ssssssssss......................................................................................................................................................................................................s.........................s....................sssssssssssssssssssss......................................................................................................................................................s..............s..............sss..........................................................................................................................................................................................................................................................................................................................................................................s..s...........................................................................................................................................................................................................ss.............................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................F...............................................................................................................................................................................................................ss...............................................................................................................................................................................................s................................s.........s..........sss......................................................................ss.........s........................................s...s.......................................................................................s................ss...ss...s.s...s....ss..............s..........................................................s...ss..s.s...ss.....sss...........sss........s..............................................................ssssss....................................................................................................................................................sssssssssssssssssssssssss........s.sss..............................................................................................................................................................................s............................................................ss..............ssss..........................................................................................................................................................................................................................................................................s.ssss.............................................................................................................................ssssss.................................x............................................................ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss........................sssss...................ssssssssss
======================================================================
FAIL: test_migrate_legacy_router (multiple_database.tests.RouterTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/ubuntu002/django/tests/multiple_database/tests.py", line 954, in test_migrate_legacy_router
    self.assertEqual(recorded, [])
AssertionError: Lists differ: [<warnings.WarningMessage object at 0x7f9b422b7320>] != []

First list contains 1 additional elements.
First extra element 0:
<warnings.WarningMessage object at 0x7f9b422b7320>

- [<warnings.WarningMessage object at 0x7f9b422b7320>]
+ []

======================================================================
FAIL: test_old_style_storage (file_storage.tests.FileFieldStorageTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/ubuntu002/django/tests/file_storage/tests.py", line 566, in test_old_style_storage
    self.assertEqual(len(warns), 2)
AssertionError: 4 != 2

======================================================================
FAIL: test_if_tag_eq_deprecated (template_tests.syntax_tests.test_if.IfTagTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/ubuntu002/django/django/test/utils.py", line 182, in inner
    return test_func(*args, **kwargs)
  File "/home/ubuntu002/django/tests/template_tests/utils.py", line 62, in inner
    func(self)
  File "/home/ubuntu002/django/tests/template_tests/syntax_tests/test_if.py", line 537, in test_if_tag_eq_deprecated
    self.assertEqual(len(warns), 1)
AssertionError: 3 != 1

----------------------------------------------------------------------
Ran 9635 tests in 208.958s

FAILED (failures=3, skipped=940, expected failures=6)
Destroying test database for alias 'default'...
Destroying test database for alias 'other'...
(djangodev) ubuntu002@ubuntu002:~/django/tests$ 

```
